(function(e){function t(t){for(var o,s,a=t[0],c=t[1],u=t[2],d=0,p=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);h&&h(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-canvas-shapes/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var h=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"2a6f":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"9c0c":function(e,t,n){},bac4:function(e,t,n){"use strict";var o=n("2a6f"),r=n.n(o);r.a},cd49:function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("PlayGround")],1)},i=[],s=n("9ab4"),a=n("60a3"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play-ground"},[n("canvas",{ref:"playGround",attrs:{id:"play-ground-canvas",width:"600",height:"500",tabindex:"0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.onLeftKey(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:"button"in t&&2!==t.button?null:e.onRightKey(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.onUpKey(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.onDownKey(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onESC(t)}]}}),n("button",{staticClass:"add-rectangle-button",attrs:{"aria-label":"Add Rectangle"},on:{click:e.addRectangle}},[e._v("+")]),-1!==e.selectedShapeId?n("button",{staticClass:"delete-shape-button",attrs:{"aria-label":"Delete Shape"},on:{click:e.deleteShape}},[e._v(" Delete ")]):e._e()])},u=[],h="https://about-you-pangea.s3.eu-central-1.amazonaws.com",d=h+"/shapes.json",p=8,l=0,f=2*Math.PI,y=function(){function e(){}return e.prototype.getShapes=function(){return s["b"](this,void 0,Promise,(function(){var e,t;return s["e"](this,(function(n){switch(n.label){case 0:return[4,fetch(d)];case 1:return e=n.sent(),[4,e.json()];case 2:return t=n.sent(),[2,t]}}))}))},e}(),g=new y,v=function(e,t){if(e){var n=t.coordinates;e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;o++)e.lineTo(n[o].x,n[o].y);e.fillStyle=t.color,e.fill(),e.closePath()}},x=function(e,t){e&&(e.beginPath(),e.arc(t.x,t.y,p,l,f),e.fillStyle="grey",e.strokeStyle="grey",e.fill(),e.stroke())},b=function(e,t,n){if(e){var o=n.coordinates;e.beginPath(),e.moveTo(o[0].x,o[0].y);for(var r=1;r<o.length;r++)e.lineTo(o[r].x,o[r].y);return e.closePath(),e.isPointInPath(t.x,t.y)}return!1},w=function(e,t,n){return!!e&&(e.beginPath(),e.arc(t.x,t.y,p,l,f),e.isPointInPath(n.x,n.y))},S=1,m="0123456789abcdef".split(""),I=function(e,t){var n=Math.random()*e,o=Math.random()*t,r=Math.random()*(e/5-e/6)-e/6,i=Math.random()*(t/3-t/5)-t/5,s=1e4*Math.sin(S++),a="#"+Array.from({length:6},(function(){return m[Math.floor(Math.random()*m.length)]})).join("");return{id:s-Math.floor(s),label:"Sample Rectangle",color:a,coordinates:[{x:n,y:o},{x:n+r,y:o},{x:n+r,y:o+i},{x:n,y:o+i}]}},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ctx=t.getContextValue(),t.shapes=[],t.corners={coordinates:[],shapeId:-1},t.draggingCornerIndex=-1,t.selectedShapeId=-1,t}return s["d"](t,e),t.prototype.getContextValue=function(){var e=this.$refs.playGround;return e&&e.getContext("2d")},t.prototype.mounted=function(){return s["b"](this,void 0,void 0,(function(){var e;return s["e"](this,(function(t){switch(t.label){case 0:return this.ctx=this.getContextValue(),e=this,[4,g.getShapes()];case 1:return e.shapes=t.sent(),this.$refs.playGround.addEventListener("mousemove",this.onMouseMove,!1),this.$refs.playGround.addEventListener("mousedown",this.onMouseDown,!1),this.$refs.playGround.addEventListener("mouseup",this.onMouseUp,!1),[2]}}))}))},t.prototype.onShapesChanged=function(e,t){this.drawShapes()},t.prototype.onCornersChanged=function(e,t){this.drawShapes()},t.prototype.beforeDestroy=function(){this.$refs.playGround.removeEventListener("mousemove",this.onMouseMove,!1)},t.prototype.addRectangle=function(){var e=this.$refs.playGround.getBoundingClientRect();this.shapes.push(I(e.width,e.height))},t.prototype.deleteShape=function(){var e=this,t=this.shapes.findIndex((function(t){return t.id===e.selectedShapeId}));this.shapes.splice(t,1),this.corners={coordinates:[],shapeId:-1},this.selectedShapeId=-1},t.prototype.onESC=function(){-1!==this.selectedShapeId&&(this.selectedShapeId=-1,this.corners={coordinates:[],shapeId:-1},this.drawShapes())},t.prototype.onArrowKey=function(e){var t=this;if(-1!==this.selectedShapeId){var n=this.shapes.findIndex((function(e){return e.id===t.selectedShapeId}));this.shapes[n]=s["a"]({},this.shapes[n],{coordinates:this.shapes[n].coordinates.map(e)}),this.corners.coordinates=this.corners.coordinates.map(e),this.drawShapes()}},t.prototype.onLeftKey=function(){this.onArrowKey((function(e){return{x:e.x-5,y:e.y}}))},t.prototype.onRightKey=function(){this.onArrowKey((function(e){return{x:e.x+5,y:e.y}}))},t.prototype.onUpKey=function(){this.onArrowKey((function(e){return{x:e.x,y:e.y-5}}))},t.prototype.onDownKey=function(){this.onArrowKey((function(e){return{x:e.x,y:e.y+5}}))},t.prototype.onMouseDown=function(e){var t=this,n=this.$refs.playGround.getBoundingClientRect(),o=e.clientX-n.left,r=e.clientY-n.top;this.draggingCornerIndex=this.corners.coordinates.findIndex((function(e){return w(t.ctx,e,{x:o,y:r})}));var i=this.shapes.find((function(e){return b(t.ctx,{x:o,y:r},e)}));this.selectedShapeId=i&&i.id||-1,-1===this.selectedShapeId&&-1===this.draggingCornerIndex&&(this.corners={coordinates:[],shapeId:-1},this.drawShapes())},t.prototype.onMouseUp=function(){this.draggingCornerIndex=-1},t.prototype.onMouseMove=function(e){var t=this;if(this.ctx){var n=this.$refs.playGround.getBoundingClientRect(),o=e.clientX-n.left,r=e.clientY-n.top;if(this.draggingCornerIndex>-1){this.corners.coordinates[this.draggingCornerIndex]={x:o,y:r};var i=this.shapes.findIndex((function(e){return e.id===t.corners.shapeId}));this.shapes[i].coordinates=this.corners.coordinates,this.drawShapes()}else{var s=this.shapes.find((function(e){return b(t.ctx,{x:o,y:r},e)||t.selectedShapeId===e.id})),a=this.corners.coordinates.find((function(e){return w(t.ctx,e,{x:o,y:r})}));if(s&&!this.corners.coordinates.length){this.corners.shapeId=s.id;for(var c=0,u=s.coordinates;c<u.length;c++){var h=u[c];x(this.ctx,h),this.corners.coordinates.push(h)}}else s||!this.corners.coordinates.length||a||(this.corners={coordinates:[],shapeId:-1})}}},t.prototype.drawShapes=function(){var e=this,t=this.$refs.playGround.getBoundingClientRect();this.ctx&&this.ctx.clearRect(0,0,t.width,t.height),this.shapes.forEach((function(t){return v(e.ctx,t)})),this.corners.coordinates.forEach((function(t){return x(e.ctx,t)}))},s["c"]([Object(a["c"])("shapes")],t.prototype,"onShapesChanged",null),s["c"]([Object(a["c"])("corners")],t.prototype,"onCornersChanged",null),t=s["c"]([Object(a["a"])({name:"play-ground"})],t),t}(a["b"]),k=C,M=k,O=(n("bac4"),n("2877")),P=Object(O["a"])(M,c,u,!1,null,null,null),j=P.exports,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s["d"](t,e),t=s["c"]([Object(a["a"])({components:{PlayGround:j}})],t),t}(a["b"]),K=_,R=K,E=(n("5c0b"),Object(O["a"])(R,r,i,!1,null,null,null)),G=E.exports,$=n("2f62");o["a"].use($["a"]);var A=new $["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({store:A,render:function(e){return e(G)}}).$mount("#app")}});
//# sourceMappingURL=app.ed664439.js.map